/JOB
//NAME TOOL-CHECK-AUTOMATICALY
//POS
///NPOS 39,39,0,6,0,0
///TOOL 0
///POSTYPE PULSE
///PULSE
C00000=1,915,707,0,-2,46844
C00001=-11996,18122,7228,-2804,43196,57451
C00002=-13628,19367,5533,-4058,44874,58497
C00003=-13613,19531,5682,-4045,44861,58487
C00004=-13680,18885,6139,-4037,44227,58484
C00005=3137,680,-1926,9179,30131,46244
C00006=0,0,-1,0,0,46844
C00007=12704,6043,-50274,122642,39769,-30984
C00008=12704,-8329,-23679,95263,52732,-11236
C00009=3711,-20739,-64122,159148,56132,1578
C00010=5895,12098,-48636,156032,47421,10440
C00011=4300,14093,-45360,157624,48679,9815
C00012=2176,12991,-45707,160005,49115,8795
C00013=1301,12961,-45734,161010,49141,8357
C00014=1439,11241,-45339,161400,50169,5736
C00015=505,11043,-45321,162505,50299,5248
C00016=718,9690,-46519,162254,50192,5358
C00017=695,10430,-45884,162280,50235,5348
C00018=1840,10907,-45707,160934,50083,5942
C00019=899,10767,-45614,162035,50239,5457
C00020=3195,11237,-45698,159358,49871,6636
C00021=3090,10618,-46206,159484,49855,6579
C00022=1570,10254,-46211,161252,50090,5801
C00023=2647,11064,-45737,159994,49955,6354
C00024=1298,10752,-45738,161580,50158,5660
C00025=5877,11970,-45615,156296,49393,7968
C00026=12,5051,-39849,163457,53477,-17308
C00027=-1799,5206,-40246,165805,53119,-18444
C00028=-2584,5116,-40170,166831,53193,-18942
C00029=1200,5678,-40438,161949,52753,-16583
C00030=6381,14321,-44853,155484,46048,4187
C00031=2921,12787,-45330,159098,46736,2641
C00032=2136,12747,-45364,159949,46768,2269
C00033=5895,12098,-48636,156032,47421,10440
C00034=3711,-20739,-64122,159148,56132,1578
C00035=12704,-8329,-23679,95263,52732,-11236
C00036=12704,6043,-50274,122642,39769,-30984
C00037=0,0,-1,0,0,46844
C00038=0,0,-1,0,0,46844
BC00000=175236
BC00001=175235
BC00002=175235
BC00003=175235
BC00004=175235
BC00005=175235
BC00006=175236
BC00007=106776
BC00008=106776
BC00009=106776
BC00010=106776
BC00011=106777
BC00012=106777
BC00013=106777
BC00014=106777
BC00015=106777
BC00016=106777
BC00017=106777
BC00018=106777
BC00019=106777
BC00020=106777
BC00021=106777
BC00022=106777
BC00023=106777
BC00024=106777
BC00025=106777
BC00026=106777
BC00027=106777
BC00028=106777
BC00029=106777
BC00030=106777
BC00031=106777
BC00032=106777
BC00033=106776
BC00034=106776
BC00035=106776
BC00036=106776
BC00037=175236
BC00038=175236
///USER 3
///POSTYPE USER
///RECTAN
///RCONF 1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
P00020=-0.209,0.009,-0.027,0.0015,0.0009,-0.0009
///RCONF 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
P00021=3.573,29.899,41.410,-92.9664,4.3828,-87.5240
P00022=5.996,34.085,41.465,-92.9675,4.3806,-87.5246
P00023=11.894,32.758,41.577,-92.9686,4.3824,-87.5256
P00024=16.228,33.486,41.371,-92.9715,4.3830,-87.5187
///RCONF 1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
P00025=13.737,31.790,26.728,-50.4106,0.5371,-87.8389
//INST
///DATE 2018/10/31 10:39
///ATTR SC,RW
///GROUP1 RB1,BS1
///LVARS 10,5,0,0,0,0,0,0
NOP
SFTOF
IFTHEN IN#(629)=ON
	 GETREG LI000 MREG#(1)
	 SET LB001 LI000
	 JUMP LABEL: LB001
ENDIF
*TOP
SET LB000 0
MSG "Check torch from welding robot"
TIMER T=1.00
'********************************
'"
'----- Check sensor is OK ------
'"
MOVL C00000 BC00000 V=166.7 SRCH RIN#(2)=ON DIS=1.0
GETS B005 $B002
IFTHEN B005=0
	 SET LB000 4
ENDIF
'"
'********************************
'CUT the wire
' 
'"
'Set register
SETREG MREG#(1) 1
'"
PULSE OT#(50) T=3.00
MOVL C00001 BC00001 V=166.7
'"
'Set register
SETREG MREG#(1) 2
'"
PULSE OT#(26) T=2.00
TIMER T=4.00
MOVL C00002 BC00002 V=83.3 PL=0
'"
MOVL C00003 BC00003 V=83.3 PL=0
'"
PULSE OT#(24) T=1.50
TIMER T=0.50
MOVL C00004 BC00004 V=83.3
'"
MOVL C00005 BC00005 V=166.7
'"
'Set register
SETREG MREG#(1) 2
'"
PULSE OT#(27) T=1.50
'********************************
'"
'Checking tool on SICK sensor
'"
MOVJ C00006 BC00006 VJ=25.00
'"
'Set register
SETREG MREG#(1) 1
'"
MOVL C00007 BC00007 V=166.7
'"
'Set register
SETREG MREG#(1) 2
'"
MOVL C00008 BC00008 V=166.7
'"
'Set register
SETREG MREG#(1) 3
'"
'"
MOVJ C00009 BC00009 VJ=10.00
'"
'Set register
SETREG MREG#(1) 4
'"
'"
MOVL C00010 BC00010 V=166.7
'"
'Set register
SETREG MREG#(1) 5
'"
'********************************
'"
'----- Check wire is gone -----
'"
*Wire-re
MOVL C00011 BC00011 V=83.3 PL=0
PULSE OT#(27) T=0.20
TIMER T=0.50
MOVL C00012 BC00012 V=83.3
MOVL C00013 BC00013 V=41.7 SRCH RIN#(2)=OFF DIS=0.5
GETS B005 $B002
JUMP *Wire-re IF B005=1
'"
'********************************
'"
'----- check gas cup in Z -----
'"
SET B005 0
MOVL C00014 BC00014 V=83.3
TIMER T=1.00
MOVL C00015 BC00015 V=4.2 SRCH RIN#(2)=OFF DIS=2.0
'"
GETS B005 $B002
GETS PX020 $PX000
CNVRT PX020 PX020 UF#(3)
SUB P020 P021
GETE D020 P020 (1)
IFTHEN D020<D021 ORIF D020>D022 ORIF B005=0
	 SET LB000 1
ENDIF
'"
'********************************
'"
'----- Check wolfram -----
'"
TIMER T=0.50
MOVL C00016 BC00016 V=8.3
TIMER T=0.50
MOVL C00017 BC00017 V=8.3 SRCH RIN#(2)=OFF DIS=2.0
'"
GETS B005 $B002
GETS PX020 $PX000
CNVRT PX020 PX020 UF#(3)
SUB P020 P022
GETE D020 P020 (2)
IFTHEN D020<D021 ORIF D020>D022 ORIF B005=0
	 SET LB000 2
ENDIF
TIMER T=0.50
MOVL C00018 BC00018 V=8.3 PL=0
MOVL C00019 BC00019 V=4.2 SRCH RIN#(2)=OFF DIS=2.0
'"
GETS B005 $B002
GETS PX020 $PX000
CNVRT PX020 PX020 UF#(3)
SUB P020 P023
GETE D020 P020 (1)
IFTHEN D020<D021 ORIF D020>D022 ORIF B005=0
	 SET LB000 2
ENDIF
TIMER T=0.50
MOVL C00020 BC00020 V=83.3
SET B005 0
'********************************
'"
'----- Check wire is back -----
'"
PULSE OT#(26) T=1.00
TIMER T=2.00
*wire-ret
TIMER T=0.50
MOVL C00021 BC00021 V=83.3 PL=0
PULSE OT#(26) T=0.50
TIMER T=0.50
MOVL C00022 BC00022 V=41.7 SRCH RIN#(2)=OFF DIS=2.0
GETS B005 $B002
JUMP *wire-ret IF B005=0
SET B005 0
MOVL C00023 BC00023 V=83.3
TIMER T=0.50
MOVL C00024 BC00024 V=4.2 SRCH RIN#(2)=OFF DIS=5.0
'"
GETS B005 $B002
GETS PX020 $PX000
CNVRT PX020 PX020 UF#(3)
SUB P020 P024
GETE D020 P020 (1)
IFTHEN D020<D021 ORIF D020>D022 ORIF B005=0
	 SET LB000 3
ENDIF
SET B005 0
TIMER T=0.50
MOVL C00025 BC00025 V=83.3
MOVL C00026 BC00026 V=83.3
MOVL C00027 BC00027 V=83.3
MOVL C00028 BC00028 V=4.2 SRCH RIN#(2)=OFF DIS=5.0
'"
GETS B005 $B002
GETS PX020 $PX000
CNVRT PX020 PX020 UF#(3)
SUB P020 P025
GETE D020 P020 (1)
IFTHEN D020<D021 ORIF D020>D022 ORIF B005=0
	 SET LB000 3
ENDIF
TIMER T=0.50
MOVL C00029 BC00029 V=83.3
SET B005 0
'********************************
'"
'----- Check wire is gone -----
'"
PULSE OT#(27) T=1.00
TIMER T=1.00
*wire-rtr
PULSE OT#(27) T=0.40
TIMER T=0.50
MOVL C00030 BC00030 V=83.3
MOVL C00031 BC00031 V=83.3
MOVL C00032 BC00032 V=41.7 SRCH RIN#(2)=OFF DIS=2.0
GETS B005 $B002
JUMP *wire-rtr IF B005=1
'"
MOVL C00033 BC00033 V=166.7
PULSE OT#(27) T=0.20
'"
'Set register
SETREG MREG#(1) 5
*5
'"
MOVJ C00034 BC00034 VJ=10.00
'"
'Set register
SETREG MREG#(1) 4
*4
'"
MOVL C00035 BC00035 V=166.7
'"
'Set register
SETREG MREG#(1) 3
*3
'"
MOVL C00036 BC00036 V=166.7
'"
'Set register
SETREG MREG#(1) 2
*2
'"
MOVL C00037 BC00037 V=333.3
'"
'Set register
SETREG MREG#(1) 1
MSG ""
*1
MOVJ C00038 BC00038 VJ=25.00
'********************************
'********************************
'"
SET B003 0
JUMP *end IF IN#(757)=ON
IFTHEN LB000=1
	 SETUALM 8000 "Gas cup is not mounted properly" 0
	 SET B003 1
	 TIMER T=1.00
ENDIF
'********************************
'"
IFTHEN LB000=2
	 SETUALM 8000 "Wolfram is not OK. Please check!" 0
	 SET B003 1
	 TIMER T=1.00
ENDIF
'********************************
'"
IFTHEN LB000=3
	 SETUALM 8000 "Wire is not OK. Please check!" 0
	 SET B003 1
	 TIMER T=1.00
ENDIF
'********************************
'"
IFTHEN LB000=4
	 SETUALM 8000 "Please check the SICK sensor" 0
	 SET B003 1
	 TIMER T=1.00
ENDIF
'********************************
*NO-alarm
*END
*end
*LABEL
END
